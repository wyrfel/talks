<html>
<head>
    <style>
        body {
            margin: 0;
            padding: 0;
        }
    </style>
    <script>
        window.onload = function() {
//////////////////////////////////////////////////////////////////////////////////
// A demonstration of a Canvas nebula effect
// (c) 2010 by R Cecco. <http://www.professorcloud.com>
// MIT License
//
// Please retain this copyright header in all versions of the software if
// using significant parts of it
//////////////////////////////////////////////////////////////////////////////////


// The canvas element we are drawing into.
                    var	canvas = document.getElementById('canvas');
                    var	canvas2 = document.getElementById('canvas2');
                    var	canvas3 = document.getElementById('canvas3');

                    //making the canvas full screen
                    canvas.height = window.innerHeight;
                    canvas.width = window.innerWidth;
                    canvas2.height = window.innerHeight;
                    canvas2.width = window.innerWidth;
                    canvas3.height = window.innerHeight;
                    canvas3.width = window.innerWidth;

                    var	ctx2 = canvas2.getContext('2d');
                    var	ctx = canvas.getContext('2d');
                    var w = canvas.width,
                        h = canvas.height;
                    var	img = new Image();

// A puff.
                    var	Puff = function(p) {
                        var	opacity,
                                sy = (Math.random()*285)>>0,
                                sx = (Math.random()*500)>>0;

                        this.p = p;

                        this.move = function(timeFac) {
                            p = this.p + 0.3 * timeFac;
                            opacity = (Math.sin(p*0.05)*0.5);
                            if(opacity <0) {
                                p = opacity = 0;
                                sy = (Math.random()*285)>>0;
                                sx = (Math.random()*500)>>0;
                            }
                            this.p = p;
                            ctx.globalAlpha = opacity;
                            ctx.drawImage(canvas3, sy+p, sy+p, 500-(p*2),285-(p*2), 0,0, w, h);
                        };
                    };

                    var	puffs = [];
                    var	sortPuff = function(p1,p2) { return p1.p-p2.p; };
                    puffs.push( new Puff(0) );
                    puffs.push( new Puff(20) );
                    puffs.push( new Puff(40) );

                    var	newTime, oldTime = 0, timeFac;

                    var	loop = function()
                    {
                        newTime = new Date().getTime();
                        if(oldTime === 0 ) {
                            oldTime=newTime;
                        }
                        timeFac = (newTime-oldTime) * 0.1;
                        if(timeFac>3) {timeFac=3;}
                        oldTime = newTime;
                        puffs.sort(sortPuff);

                        for(var i=0;i<puffs.length;i++)
                        {
                            puffs[i].move(timeFac);
                        }
                        ctx2.drawImage( canvas ,0,0,w,h);
                        setTimeout(loop, 10 );
                    };
// Turns out Chrome is much faster doing bitmap work if the bitmap is in an existing canvas rather
// than an IMG, VIDEO etc. So draw the big nebula image into canvas3
                    var	canvas3 = document.getElementById('canvas3');
                    var	ctx3 = canvas3.getContext('2d');
                    img.addEventListener('load', function() {
                        ctx3.drawImage(img, 0,0, w, h);	loop();
                    }, false);
                    img.src = '../images/backgrounds/nebula.jpg';
        };
    </script>
</head>
<body>
<canvas style="display:none" id="canvas" width="285" height="285"></canvas>
<canvas style="display:none" id="canvas3" width="570" height="570"></canvas>
<canvas id="canvas2" width="570" height="570"></canvas>
<img src="../images/spaceship-cockpit.png" class="noframe" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" />
</body>
</html>
